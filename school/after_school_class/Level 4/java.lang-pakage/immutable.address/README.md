# 기본형과 참조형의 공유


- **기본형**: 하나의 값을 **여러 변수에서 절대로 공유하지 않음**.

![image](https://github.com/wkdtjdwns/Java/assets/128266768/cadd323b-6dbc-4d33-b8ca-530b9cdc2c6a)

![image](https://github.com/wkdtjdwns/Java/assets/128266768/b80f152f-17db-4b69-a685-c49331e49c36)

---

- **참조형**: 하나의 객체를 **참조 값을 통해 여러 변수에서 공유할 수 있음**.

![image](https://github.com/wkdtjdwns/Java/assets/128266768/fdb67dd6-75c9-49e7-a5c2-6ec0b9ea2836)

---

# 사이드 이펙트

- **사이드 이펙트**는 프로그래밍에서 어떤 계산이 주된 작업 외에 부수 효과를 일으키는 것을 말함.

**사이드 이펙트의 예시**

- 개발자는 b의 주소 값을 서울에서 부산으로 변경할 의도로 값 변경을 시도함.
- 다만 a와 b는 같은 인스턴스를 참조하기 때문에 a의 값도 함께 부산으로 변경되어 버림.
    
    ![image](https://github.com/wkdtjdwns/Java/assets/128266768/94276303-6644-4bb8-a95d-429c8305bed7)

    ---
    
- 이렇게 주된 작업 외에 추가적인 부수 효과를 일으키는 것을 **사이드 이펙트**라고 함.
- 프로그래밍에서 사이드 이펙트는 보통 부정적인 의미로 사용함.
- **사이드 이펙트**는 프로그램의 특정 부분에서 발생한 변경이 의도치 않게 다른 부분에 영향을 미치기 때문임.
    
- 이로 인해서 디버깅이 어려워지고 코드의 안정성이 저하됨.

# 사이드 이펙트의 해결 방안

- a와 b가 처음부터 서로 다른 인스턴스를 참조하게 만들면 됨.
    
    ![image](https://github.com/wkdtjdwns/Java/assets/128266768/caf0ee72-1a89-4d65-b5fb-214c5505a5d4)

    ---
    
- 지금까지 발생한 모든 문제는 같은 객체(인스턴스)를 변수 a, b가 함께 공유하기 때문에 발생함.
- 따라서 객체를 공유하지 않으면 문제가 해결됨.
- 다만 하나의 객체를 여러 변수가 공유하지 않도록 강제로 막을 수 있는 방법이 없다는 것이 문제임.

# 불변 객체

**필요성**

- 공유하면 안 되는 객체를 여러 변수에서 공유했기 때문에 문제가 발생함.
- 하지만 앞서 살펴 봤 듯이 객체의 공유를 막을 수 있는 방법은 없음.
- 그런데 사이드 이펙트의 더 근본적인 원인을 고려해보면, 객체를 공유하는 것 자체는 문제가 아니였음.
- 객체를 공유한다고 바로 사이드 이펙트가 발생하지는 않았기 때문임.
- 문제의 직접적인 원인은 공유된 객체의 값을 변경한 것에 있음.
    
    ---
    
- **그렇다면 어떻게든 필드 값을 변경할 수 없게 클래스를 설계하면 됨!**

## 방법

- **값이 변경되면 안 됨. → value의 필드를 final로 선언하고 setValue()를 제거함.**
- **생성자를 통해서만 값을 생성할 수 있고, 이 후에는 값을 변경하는 것이 불가능 함.**
